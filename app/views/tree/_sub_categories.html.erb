<ul class="nav-pills">

    <% categories.each do |category, children| %>

    <li>

        <%= link_to category.name, category, class: "nav-link #{'active' if current_page?(category_path(category)) || @post.present? && @post.category == category}" %>
        
        <!-- render here is necessary for recursion  -->

        <%= render 'tree/sub_categories', categories: children if children.present? %>

    </li>

    <% end %>

</ul>